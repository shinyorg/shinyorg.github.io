<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Getting Started </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Getting Started ">
    <meta name="generator" content="docfx 2.56.7.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../toc">
    <meta property="docfx:tocrel" content="../toc">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                
                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="../../mobile/index.html" title="Mobile">Mobile</a>
                      </li>
                      <li>
                          <a href="../../extensions/push/index.html" title="Extensions">Extensions</a>
                      </li>
                      <li>
                          <a href="../../release-notes/mobile/v300.html" title="Releases">Releases</a>
                      </li>
                      <li>
                          <a href="https://github.com/shinyorg" title="GitHub">GitHub</a>
                      </li>
                      <li>
                          <a href="https://allanritchie.com" title="Blog">Blog</a>
                      </li>
                      <li>
                          <a href="https://github.com/sponsors/aritchie" title="Sponsor">Sponsor</a>
                      </li>
                </ul>    </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidefilter">
                <form class="toc-filter">
                  <span class="glyphicon glyphicon-filter filter-icon"></span>
                  <input type="text" id="toc_filter_input" placeholder="Enter here to filter..." onkeypress="if(event.keyCode==13) {return false;}">
                </form>
              </div>
              <div class="sidetoc">
                <div class="toc" id="toc">
                  
                  <ul class="nav level1">
                    <li class="">
                      <a href="../index.html" title="Home" class="">Home</a>
                    </li>
                    <li class="">
                      <a href="../quickstart.html" title="Quick Start" class="">Quick Start</a>
                    </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Setup</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../setup/di.html" title="Dependency Injection" class="">Dependency Injection</a>
                          </li>
                          <li class="">
                            <a href="../setup/startup.html" title="Startup" class="">Startup</a>
                          </li>
                          <li class="">
                            <a href="../setup/statics.html" title="Static Instances" class="">Static Instances</a>
                          </li>
                          <li class="">
                            <a href="../setup/ios.html" title="iOS" class="">iOS</a>
                          </li>
                          <li class="">
                            <a href="../setup/android.html" title="Android" class="">Android</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <a href="../configuration.html" title="Configuration Extensions" class="">Configuration Extensions</a>
                    </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="../jobs/index.html" title="Jobs" class="">Jobs</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../jobs/getting-started.html" title="Getting Started" class="">Getting Started</a>
                          </li>
                          <li class="">
                            <a href="../jobs/faq.html" title="Frequently Asked Questions" class="">Frequently Asked Questions</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="../ble/index.html" title="Bluetooth LE Client" class="">Bluetooth LE Client</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../ble/scanning.html" title="Scanning" class="">Scanning</a>
                          </li>
                          <li class="">
                            <a href="../ble/peripheral.html" title="Peripheral" class="">Peripheral</a>
                          </li>
                          <li class="">
                            <a href="../ble/best-practices.html" title="Best Practices" class="">Best Practices</a>
                          </li>
                          <li class="">
                            <a href="../ble/managed-scan.html" title="Manged Scanning" class="">Manged Scanning</a>
                          </li>
                          <li class="">
                            <a href="../ble/managed-peripheral.html" title="Managed Peripheral" class="">Managed Peripheral</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Bluetooth LE Hosting</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../blehosting/getting-started.html" title="Getting Started" class="">Getting Started</a>
                          </li>
                          <li class="">
                            <a href="../blehosting/hosting.html" title="GATT" class="">GATT</a>
                          </li>
                          <li class="">
                            <a href="../blehosting/advertising.html" title="Advertising" class="">Advertising</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Locations</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../locations/geofencing.html" title="Geofencing" class="">Geofencing</a>
                          </li>
                          <li class="">
                            <a href="../locations/gps.html" title="GPS" class="">GPS</a>
                          </li>
                          <li class="">
                            <a href="../locations/motionactivity.html" title="Motion Activity" class="">Motion Activity</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="../notifications/index.html" title="Local Notifications" class="">Local Notifications</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../notifications/getting-started.html" title="Getting Started" class="">Getting Started</a>
                          </li>
                          <li class="">
                            <a href="../notifications/channels.html" title="Channels" class="">Channels</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Push Notifications</a>
                        
                        <ul class="nav level2">
                          <li class="active">
                            <a href="../push/getting-started.html" title="Getting Started" class="active">Getting Started</a>
                          </li>
                          <li class="">
                            <a href="../push/native.html" title="Native" class="">Native</a>
                          </li>
                          <li class="">
                            <a href="../push/azure.html" title="Azure Notification Hubs" class="">Azure Notification Hubs</a>
                          </li>
                          <li class="">
                            <a href="../push/firebase.html" title="Firebase Messaging" class="">Firebase Messaging</a>
                          </li>
                          <li class="">
                            <a href="../push/onesignal.html" title="One Signal" class="">One Signal</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Beacons</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../beacons/ranging.html" title="Ranging" class="">Ranging</a>
                          </li>
                          <li class="">
                            <a href="../beacons/monitoring.html" title="Monitoring (Background)" class="">Monitoring (Background)</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="../httptransfers/index.html" title="HTTP Transfers" class="">HTTP Transfers</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../httptransfers/getting-started.html" title="Getting Started" class="">Getting Started</a>
                          </li>
                          <li class="">
                            <a href="../httptransfers/advanced.html" title="Advanced" class="">Advanced</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Framework</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../framework/getting-started.html" title="Getting Started" class="">Getting Started</a>
                          </li>
                          <li class="">
                            <a href="../framework/viewmodel.html" title="ViewModel" class="">ViewModel</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Sensors</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="../sensors/getting-started.html" title="Getting Started" class="">Getting Started</a>
                          </li>
                          <li class="">
                            <a href="../sensors/accelerometer.html" title="Accelerometer" class="">Accelerometer</a>
                          </li>
                          <li class="">
                            <a href="../sensors/ambientlight.html" title="Ambient Light" class="">Ambient Light</a>
                          </li>
                          <li class="">
                            <a href="../sensors/barometer.html" title="Barometer" class="">Barometer</a>
                          </li>
                          <li class="">
                            <a href="../sensors/compass.html" title="Compass" class="">Compass</a>
                          </li>
                          <li class="">
                            <a href="../sensors/gyroscope.html" title="Gyroscope" class="">Gyroscope</a>
                          </li>
                          <li class="">
                            <a href="../sensors/humidity.html" title="Humidity" class="">Humidity</a>
                          </li>
                          <li class="">
                            <a href="../sensors/magnetometer.html" title="Magnetometer" class="">Magnetometer</a>
                          </li>
                          <li class="">
                            <a href="../sensors/pedometer.html" title="Pedometer" class="">Pedometer</a>
                          </li>
                          <li class="">
                            <a href="../sensors/proximity.html" title="Proximity" class="">Proximity</a>
                          </li>
                          <li class="">
                            <a href="../sensors/temperature.html" title="Temperature" class="">Temperature</a>
                          </li>
                        </ul>  </li>
                  </ul>        </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="getting-started">Getting Started</h1>

<p>Push notifications come in so many flavours these days.  The community needed one way of doing things, but the ability to swap providers in and out at will.  The reason, push providers, aside from native have been dropping
like flies the last several years.  The latest to go was AppCenter which it turns out the Xamarin community was heavily invested in. </p>
<p>Native push is the root of all other push providers.  It works at the native OS level and is usually feeding other providers like Azure Notification Hubs and Firebase.  As such, the setup instructions found
within this document generally apply to all.</p>
<h2 id="setup">Setup</h2>
<p>General OS setup is mostly the same on all platforms, but please review the specific provider you intend to use from the menu for more information</p>
<h2 id="registration">Registration</h2>
<p>Look to each appropriate provider to see setups for each.  The most important function otherwise, is RequestAccess shown below which will give you the push notification token that you can send to your backend. </p>
<p>All providers use the native implementations on the platform to some degree, as such, you will always need to call</p>
<pre><code class="lang-cs">using System;
using System.Threading.Tasks;
using Shiny;
using Shiny.Push;

public class PushRegistration
{
    public async Task CheckPermission()
    {
        var push = ShinyHost.Resolve&lt;IPushManager&gt;();
        var result = await push.RequestAccess();
        if (result.Status == AccessState.Available)
        {
            // good to go

            // you should send this to your server with a userId attached if you want to do custom work
            var value = result.RegistrationToken;
        }
    }
}
</code></pre><h2 id="background-delegate">Background Delegate</h2>
<pre><code class="lang-cs">using System;
using System.Collections.Generic;
using System.Threading.Tasks;
using Shiny.Push;


public class PushDelegate : IPushDelegate
{
    public async Task OnEntry(PushEntryArgs args)
    {
        // fires when the user taps on a push notification
    }

    public async Task OnReceived(IDictionary&lt;string, string&gt; data)
    {
        // fires when a push notification is received (silient or notification)
    }

    public async Task OnTokenChanged(string token)
    {
        // fires when a push notification change is set by the operating system or provider
    }
}
</code></pre><h2 id="foreground-monitoring">Foreground Monitoring</h2>
<p>It is quite often that you may want to change data due to a silent notification being received.  This is similar to watching a SignalR broadcast, but with observables because RX is awesome and Shiny dies on the RX hill!</p>
<pre><code class="lang-cs">using System.Reactive.Linq;
using Shiny;
using Shiny.Push;

public class PushForeground
{
    public void YourMethod()
    {
        var push = ShinyHost.Resolve&lt;IPushManager&gt;(); // assign through DI, static, or ShinyHost.Resolve
        var disp = push
            .WhenReceived()
            .Where(x =&gt; x[&quot;newdata&quot;] == &quot;true&quot;)
            .SubscribeAsync(async data =&gt;
            {
                // make you HTTP call here
            });
    }
}
</code></pre><h2 id="additional-features">Additional Features</h2>
<p>Like other modules in Shiny, there are certain providers that support additional feature sets.  Push really only has 1 extra, tagging.</p>
<p>The following providers, support tagging</p>
<ul>
<li>Azure Notification Hubs</li>
<li>Firebase</li>
</ul>
<p>In order to safely support tagging without the need for constantly feature flag or type checking, the following extension methods exist to make life easy</p>
<pre><code class="lang-cs">using System.Threading.Tasks;
using Shiny;
using Shiny.Push;

public class Extensions
{
    public async Task Method()
    {
        var push = ShinyHost.Resolve&lt;IPushManager&gt;();

        var supported = push.IsTagsSupport();

        // tries to set a params list of tags if available
        await push.TrySetTags(&quot;tag1&quot;, &quot;tag2&quot;);

        // gets a list of currently set tags
        var tags = push.TryGetTags();

        // requests permission from the user and sets tags if available
        var permissionResult = await push.TryRequestAccessWithTags(&quot;tag1&quot;, &quot;tag2&quot;);
    }
}
</code></pre><h2 id="android">Android</h2>
<p>Follow the exact same setup process as the <a href="xref:pushnative">native push provider</a></p>
<p>Please read the following <a href="https://docs.microsoft.com/en-us/xamarin/android/data-cloud/google-messaging/firebase-cloud-messaging">Microsoft Document</a> on
how to setup firebase within your Android application.</p>
<p>The process of setting up Android is a bit of process</p>
<pre><code class="lang-csharp">&lt;ItemGroup&gt;
    &lt;GoogleServicesJson Include=&quot;google-services.json&quot;&gt;
        &lt;CopyToOutputDirectory&gt;PreserveNewest&lt;/CopyToOutputDirectory&gt;
    &lt;/GoogleServicesJson&gt;
    &lt;PackageReference Include=&quot;Xamarin.GooglePlayServices.Basement&quot; Version=&quot;The same version Shiny.Push is using&quot; /&gt;
    &lt;PackageReference Include=&quot;Xamarin.GooglePlayServices.Tasks&quot; Version=&quot;The same version Shiny.Push is using&quot; /&gt;
&lt;/ItemGroup&gt;
</code></pre><h2 id="ios">iOS</h2>
<p>Follow the exact same setup process as the <a href="xref:pushnative">native push provider</a> with one addition</p>
<p>After setting up your iOS app within the firebase admin portal, add GoogleService-Info.plist to your iOS head project
and mark it as a &quot;BundleResource&quot;</p>
<h1 id="frequently-asked-questions">Frequently Asked Questions</h1>
<blockquote><p>Q: The delegate method &#39;OnReceived&#39; is not firing on Android</p>
<blockquote><p>A: You must include data payload in your push notification</p>
</blockquote>
<p>Q: The delegate method &#39;OnReceived&#39; is not firing on iOS</p>
<blockquote><p>A: You must set content-available: 1 in your push notification</p>
</blockquote>
<p>Q: I&#39;ve been sending a push every few minutes and iOS stops firing the OnReceived delegate method</p>
<blockquote><p>A: In most production settings, iOS gives you about 3-5 silent push notifications per hour before Apple starts throttling/ignorning them. </p>
</blockquote>
</blockquote>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/shinyorg/docs/blob/master/docs/mobile/push/getting-started.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
